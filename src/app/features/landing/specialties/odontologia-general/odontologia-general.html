<div class="especialidad-page">
  <app-banner-especialidad [titulo]="'Odontología Restauradora'"></app-banner-especialidad>

  <section class="info-especialidad-section">
    <div class="info-container">
      <div class="info-image">
        <img src="https://res.cloudinary.com/de3nau9kv/image/upload/v1769537371/Imagen25_ll00qz.webp" alt="Diagnóstico Integral">
      </div>
      <div class="info-content">
        <h2 class="info-title">Definición y Alcance</h2>
        <div class="info-text">
          <p><em>"La Odontología Restauradora es la rama que se encarga del diagnóstico integral, la prevención y el tratamiento de las enfermedades y defectos del esmalte, la dentina y el complejo dentino-pulpar..."</em></p>
          <p>Basado en los fundamentos de <strong>Barrancos Mooney</strong>, nuestro enfoque busca restablecer la salud, función masticatoria y estética mediante la adhesión dental y la biomecánica.</p>

          <p class="ext-link" style="margin-top: 15px;text-align: right">
            <a (click)="irAFundamentos()" style="color: #7dc0bf; cursor: pointer;">
              Ver versión extendida
            </a>
          </p>
        </div>
      </div>
    </div>
  </section>

  <section class="tabs-detalles-section">
    <div class="tabs-container">
      <h2 class="section-main-title">Protocolo de Tratamiento</h2>

      <div class="tabs-header">
        <button *ngFor="let tab of tabsEspecialidad; let i = index"
                class="tab-btn"
                [class.active]="tabActiva === i"
                (click)="cambiarTab(i)">
          {{ tab.titulo }}
        </button>
      </div>

      <div class="tab-content-body">
        <h3>{{ tabsEspecialidad[tabActiva].subtitulo }}</h3>
        <p class="tab-intro">{{ tabsEspecialidad[tabActiva].intro }}</p>

        <div class="especialidad-carousel-wrapper">

          <button class="carousel-nav-btn prev"
                  (click)="prevFase()"
                  [disabled]="currentFaseIndex === 0">❮</button>

          <div class="especialidad-overflow">
            <div class="especialidad-grid"
                 [style.transform]="'translateX(-' + (currentFaseIndex * (100 / fasesPerPage)) + '%)'"
            >

              <div class="fase-card-wrapper"
                   *ngFor="let item of tabsEspecialidad[tabActiva].detalles"
                   [style.flex]="'0 0 ' + (100 / fasesPerPage) + '%'">

                <div class="card-detalle">
                  <div class="card-image-wrapper">
                    <img [src]="item.imgUrl" [alt]="item.nombre">
                  </div>
                  <div class="card-text">
                    <h4>{{ item.nombre }}</h4>
                    <p>{{ item.descripcion }}</p>
                  </div>
                </div>

              </div>
            </div>
          </div>

          <button class="carousel-nav-btn next"
                  (click)="nextFase()"
                  [disabled]="currentFaseIndex >= tabsEspecialidad[tabActiva].detalles.length - fasesPerPage">❯</button>
        </div>
      </div>
    </div>
  </section>

  <section class="casos-section">
    <div class="casos-header">
      <h2 class="casos-main-title">Casos Clínicos</h2>
      <h3 class="casos-subtitle">RESTAURACIONES ESTÉTICAS</h3>
    </div>

    <div class="caso-container">
      <div class="image-side">
        <div class="image-comparison" (mousedown)="onMouseDown($event)" (mousemove)="onMouseMove($event)" (mouseup)="onMouseUp()">
          <div class="image-layer image-after">
            <img [src]="casoSeleccionado.imagenDespues" alt="Después">
            <div class="image-label label-after">Después</div>
          </div>
          <div class="image-layer image-before" [style.clip-path]="'inset(0 ' + (100 - sliderPosition) + '% 0 0)'">
            <img [src]="casoSeleccionado.imagenAntes" alt="Antes">
            <div class="image-label label-before">Antes</div>
          </div>
          <div class="slider-divider" [style.left.%]="sliderPosition">
            <div class="slider-handle">
              <svg viewBox="0 0 24 24"><polygon points="10 6 10 18 4 12"/><polygon points="14 6 14 18 20 12"/></svg>
            </div>
          </div>
        </div>
      </div>
      <div class="info-side">
        <h1 class="caso-titulo">{{ casoSeleccionado.titulo }}</h1>
        <p class="caso-descripcion">{{ casoSeleccionado.descripcion }}</p>
      </div>
    </div>

    <div class="casos-selector">
      <button *ngFor="let caso of casos; let i = index" class="caso-btn" [class.active]="casoActual === i" (click)="seleccionarCaso(i)">
        CASO {{ caso.id }}
      </button>
    </div>
  </section>

  <section class="video-section">
    <div class="video-container">
      <div class="video-content">
        <h2 class="video-title">Flujo Digital en Restauradora</h2>
        <p class="video-description">Aplicamos tecnología de escaneado intraoral para restauraciones precisas en tiempo récord.</p>
        <ul class="video-benefits">
          <li>Impresiones digitales (sin moldes molestos)</li>
          <li>Diseño CAD/CAM</li>
          <li>Ajuste micrométrico</li>
        </ul>
      </div>
      <div class="video-player">
        <video class="video-element" src="https://www.w3schools.com/html/mov_bbb.mp4" muted autoplay loop playsinline></video>
      </div>
    </div>
  </section>

  <section class="cta-section">
    <div class="cta-overlay"></div>
    <img src="https://picsum.photos/1200/400?dentistry=scientific" class="cta-background">

    <div class="cta-content">
      <h2 class="cta-title">Recupera la funcionalidad de tu sonrisa</h2>
      <p class="cta-description">Basamos cada tratamiento en evidencia clínica y protocolos internacionales de vanguardia.</p>

      <div class="cta-actions">
        <button class="cta-button">Agendar Cita Especializada</button>

        <button class="cta-button-outline" (click)="irAFundamentos()">
          Ver Fundamentos Científicos
        </button>
      </div>
    </div>
  </section>

</div>
